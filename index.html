<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كـــلـــمـــة - القرآن الكريم</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a1a1a;
            --secondary-color: #333333;
            --accent-color: #d4af37;
            --text-color: #f0f0f0;
            --light-bg: #1a2b3c;
            --dark-bg: #0d1824;
            --card-bg: #223344;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            --font-size: 1.8rem;
            --header-font-size: 1.6rem;
            --surah-font-size: 1.4rem;
        }

        .light-mode {
            --text-color: #333;
            --light-bg: #f5f5f5;
            --dark-bg: #ffffff;
            --card-bg: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .theme-black {
            --primary-color: #1a1a1a;
            --secondary-color: #333333;
            --accent-color: #d4af37;
        }

        .theme-blue {
            --primary-color: #2c5e8a;
            --secondary-color: #4a8c5c;
            --accent-color: #d4af37;
        }

        .theme-green {
            --primary-color: #2d7d46;
            --secondary-color: #4a8c5c;
            --accent-color: #e6c158;
        }

        .theme-red {
            --primary-color: #a8323e;
            --secondary-color: #c45c3f;
            --accent-color: #e6b158;
        }

        .theme-purple {
            --primary-color: #6a4c9d;
            --secondary-color: #8e5ca1;
            --accent-color: #d9a7eb;
        }

        .theme-gold {
            --primary-color: #b8860b;
            --secondary-color: #daa520;
            --accent-color: #ffd700;
        }

        .font-size-small {
            --font-size: 1.4rem;
            --header-font-size: 1.2rem;
            --surah-font-size: 1.1rem;
        }

        .font-size-medium {
            --font-size: 1.8rem;
            --header-font-size: 1.6rem;
            --surah-font-size: 1.4rem;
        }

        .font-size-large {
            --font-size: 2.2rem;
            --header-font-size: 1.8rem;
            --surah-font-size: 1.6rem;
        }

        .font-size-xlarge {
            --font-size: 2.6rem;
            --header-font-size: 2rem;
            --surah-font-size: 1.8rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            font-size: var(--font-size);
            transition: all 0.3s ease;
            padding-top: 140px;
        }

        .app-container {
            max-width: 100%;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--dark-bg) 100%);
            color: white;
            padding: 12px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            height: 80px;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            font-size: 1.8rem;
            color: var(--accent-color);
        }

        .header h1 {
            font-size: var(--header-font-size);
            margin: 0;
        }

        .header-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .icon-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
        }

        .language-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            min-width: 80px;
        }

        .nav-tabs {
            display: flex;
            background-color: var(--primary-color);
            overflow-x: auto;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            z-index: 999;
            width: 100%;
            height: 60px;
        }

        .nav-tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            min-width: 120px;
            font-size: var(--header-font-size);
        }

        .nav-tab.active {
            background-color: rgba(255, 255, 255, 0.1);
            border-bottom: 3px solid var(--accent-color);
        }

        .main-content {
            flex: 1;
            padding: 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .surah-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            border-right: 4px solid var(--primary-color);
            cursor: pointer;
        }

        .surah-card:hover {
            transform: translateY(-3px);
        }

        .surah-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .surah-number {
            background-color: var(--primary-color);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .surah-name {
            font-size: var(--surah-font-size);
            font-weight: bold;
            color: var(--primary-color);
            flex: 1;
            margin-right: 15px;
        }

        .surah-name-english {
            font-size: 0.9rem;
            color: #aaa;
        }

        .light-mode .surah-name-english {
            color: #666;
        }

        .surah-details {
            display: flex;
            gap: 15px;
            margin-top: 5px;
        }

        .surah-type {
            background-color: var(--secondary-color);
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .reading-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            position: relative;
        }

        .reading-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .light-mode .reading-header {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .reading-header h2 {
            color: var(--primary-color);
            font-size: var(--header-font-size);
            margin-bottom: 5px;
        }

        .speed-control-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .speed-slider-container {
            flex: 1;
            max-width: 200px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .speed-slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            background: var(--card-bg);
            border-radius: 3px;
            outline: none;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--accent-color);
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid var(--card-bg);
        }

        .speed-display {
            min-width: 40px;
            text-align: center;
            font-size: var(--header-font-size);
            color: var(--text-color);
        }

        .auto-scroll-toggle {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .auto-scroll-toggle.active {
            background: var(--secondary-color);
        }

        .search-container {
            margin-bottom: 20px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border-radius: 30px;
            border: none;
            background-color: var(--card-bg);
            color: var(--text-color);
            font-size: var(--header-font-size);
            box-shadow: var(--shadow);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-color);
            opacity: 0.7;
        }

        .ayahs-container-wrapper {
            display: flex;
            gap: 20px;
            min-height: 60vh;
            position: relative;
        }

        .surahs-sidebar {
            width: 250px;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            overflow-y: auto;
            box-shadow: var(--shadow);
            max-height: 70vh;
        }

        .surahs-sidebar-item {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border-right: 3px solid transparent;
            font-size: var(--surah-font-size);
        }

        .surahs-sidebar-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .surahs-sidebar-item.active {
            background: rgba(255,255,255,0.15);
            border-right: 3px solid var(--accent-color);
        }

        .ayahs-container {
            flex: 1;
            font-family: 'Traditional Arabic', serif;
            font-size: var(--font-size);
            line-height: 2.5;
            text-align: justify;
            color: var(--text-color);
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow-y: auto;
            box-shadow: var(--shadow);
            position: relative;
            max-height: 70vh;
        }

        .light-mode .ayahs-container {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .ayah {
            display: inline;
            margin-left: 5px;
        }

        .ayah-text {
            display: inline;
        }

        .ayah-number {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-size: 0.8rem;
            margin: 0 5px;
            font-weight: bold;
            vertical-align: super;
            cursor: pointer;
            transition: all 0.3s;
        }

        .ayah-number:hover {
            transform: scale(1.1);
            background-color: var(--accent-color);
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .light-mode .controls {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .control-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: var(--header-font-size);
        }

        .seerah-categories {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .seerah-category {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--primary-color);
        }

        .seerah-category h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: var(--header-font-size);
        }

        .seerah-category p {
            font-size: var(--header-font-size);
            line-height: 1.6;
        }

        .adhkar-categories {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .dhikr-category {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--secondary-color);
        }

        .dhikr-category h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: var(--header-font-size);
        }

        .dhikr-category p {
            font-size: var(--header-font-size);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .tasbih-categories {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .tasbih-item {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--accent-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tasbih-item:hover {
            transform: translateY(-3px);
        }

        .tasbih-content {
            flex: 1;
        }

        .tasbih-content h3 {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: var(--header-font-size);
        }

        .tasbih-content p {
            font-size: var(--header-font-size);
            color: var(--text-color);
            opacity: 0.9;
        }

        .tasbih-counter {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .counter-display {
            font-size: 2rem;
            color: var(--accent-color);
            font-weight: bold;
        }

        .counter-target {
            font-size: var(--header-font-size);
            color: var(--text-color);
            opacity: 0.8;
        }

        .reset-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            margin-right: 10px;
        }

        .settings-section {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .settings-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: var(--header-font-size);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: var(--header-font-size);
        }

        .light-mode .setting-item {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .color-themes {
            display: flex;
            gap: 10px;
        }

        .color-theme {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-theme.active {
            border-color: var(--text-color);
            transform: scale(1.1);
        }

        .theme-black-bg { background-color: #1a1a1a; }
        .theme-blue-bg { background-color: #2c5e8a; }
        .theme-green-bg { background-color: #2d7d46; }
        .theme-red-bg { background-color: #a8323e; }
        .theme-purple-bg { background-color: #6a4c9d; }
        .theme-gold-bg { background-color: #b8860b; }

        .footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 15px;
            font-size: 0.9rem;
        }

        .loading {
            text-align: center;
            padding: 40px 20px;
            color: var(--primary-color);
        }

        .back-button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: var(--header-font-size);
        }

        /* نافذة الحوار */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: var(--header-font-size);
        }

        .modal p {
            margin-bottom: 20px;
            font-size: var(--header-font-size);
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: var(--header-font-size);
            transition: all 0.3s;
            min-width: 100px;
        }

        .modal-btn.confirm {
            background-color: var(--secondary-color);
            color: white;
        }

        .modal-btn.cancel {
            background-color: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--primary-color);
        }

        .modal-btn.continue {
            background-color: var(--accent-color);
            color: white;
        }

        .language-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 10px;
            min-width: 150px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1001;
            display: none;
        }

        .language-menu.active {
            display: block;
        }

        .language-option {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
            text-align: right;
        }

        .language-option:hover {
            background: rgba(255,255,255,0.1);
        }

        .last-ayah-preview {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-right: 3px solid var(--accent-color);
        }

        .last-ayah-preview .ayah-text {
            font-family: 'Traditional Arabic', serif;
            font-size: 1.4rem;
            line-height: 2;
            text-align: justify;
        }

        /* إشعار آخر آية تم النقر عليها - تم التعديل هنا */
        .last-ayah-notification {
            position: fixed;
            top: 140px;
            left: 0;
            right: 0;
            background: var(--primary-color);
            color: white;
            padding: 4px 10px;
            z-index: 998;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            transform: translateY(-100%);
            opacity: 0;
            font-size: 0.7rem;
            height: 25px;
        }

        .last-ayah-notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .last-ayah-content {
            flex: 1;
            margin-right: 10px;
            font-size: 0.7rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .last-ayah-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.7rem;
        }

        /* تصميم صفحة المزيد */
        .more-section {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .more-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: var(--header-font-size);
        }

        .more-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: var(--header-font-size);
            cursor: pointer;
            transition: all 0.3s;
        }

        .light-mode .more-item {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .more-item:hover {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding-left: 10px;
            padding-right: 10px;
        }

        .more-item-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .more-item-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .more-item-text {
            display: flex;
            flex-direction: column;
        }

        .more-item-title {
            font-weight: bold;
            color: var(--text-color);
        }

        .more-item-desc {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
        }

        .more-item-arrow {
            color: var(--text-color);
            opacity: 0.7;
        }

        .app-info {
            text-align: center;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .app-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .app-version {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-bottom: 15px;
        }

        .app-description {
            font-size: var(--header-font-size);
            line-height: 1.6;
            color: var(--text-color);
            margin-bottom: 20px;
        }

        .app-sources {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-bottom: 10px;
        }

        .app-contact {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-direction: column;
            align-items: center;
        }

        .contact-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: var(--header-font-size);
            transition: all 0.3s;
            width: 100%;
            max-width: 300px;
            justify-content: center;
        }

        .contact-btn:hover {
            background: var(--secondary-color);
        }

        /* إشعار استئناف القراءة - تم التعديل هنا */
        .resume-notification {
            position: fixed;
            top: 140px;
            left: 0;
            right: 0;
            background: var(--accent-color);
            color: var(--primary-color);
            padding: 6px 12px;
            z-index: 999;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            transform: translateY(-100%);
            opacity: 0;
            font-size: 0.8rem;
            height: 30px;
            cursor: pointer;
        }

        .resume-notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .resume-content {
            flex: 1;
            margin-right: 10px;
            font-size: 0.8rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .resume-close {
            background: none;
            border: none;
            color: var(--primary-color);
            cursor: pointer;
            font-size: 0.8rem;
        }

        @media (max-width: 768px) {
            body {
                padding-top: 120px;
            }
            
            .header {
                height: 60px;
                padding: 10px 15px;
            }
            
            .nav-tabs {
                top: 60px;
                height: 50px;
            }
            
            .last-ayah-notification {
                top: 110px;
                height: 22px;
                padding: 3px 8px;
            }
            
            .resume-notification {
                top: 110px;
                height: 26px;
                padding: 4px 10px;
            }
            
            .header h1 { 
                font-size: 1.1rem; 
            }
            
            .controls { 
                flex-direction: column; 
                gap: 10px; 
            }
            
            .ayahs-container-wrapper {
                flex-direction: column;
            }
            
            .surahs-sidebar {
                width: 100%;
                max-height: 200px;
            }
            
            .tasbih-item {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .auto-scroll-slider-container {
                display: none;
            }
            
            .speed-control-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .speed-slider-container {
                max-width: 100%;
            }
            
            .language-btn {
                font-size: 0.8rem;
                padding: 6px 10px;
                min-width: 70px;
            }
            
            .language-menu {
                min-width: 120px;
                max-height: 250px;
            }
            
            .app-contact {
                flex-direction: column;
            }
        }
    </style>
</head>
<body class="theme-black font-size-medium">
    <div class="app-container">
        <!-- إشعار استئناف القراءة - تم التعديل هنا -->
        <div class="resume-notification" id="resume-notification">
            <div class="resume-content" id="resume-content"></div>
            <button class="resume-close" id="resume-close">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- إشعار آخر آية تم النقر عليها - تم التعديل هنا -->
        <div class="last-ayah-notification" id="last-ayah-notification">
            <div class="last-ayah-content" id="last-ayah-content"></div>
            <button class="last-ayah-close" id="last-ayah-close">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <header class="header">
            <div class="header-content">
                <h1 id="app-title">كـــلـــمـــة</h1>
            </div>
            <div class="header-controls">
                <button class="language-btn" id="language-toggle">العربية</button>
                <div class="language-menu" id="language-menu">
                    <!-- سيتم ملء اللغات هنا -->
                </div>
                <button class="icon-btn" id="theme-toggle"><i class="fas fa-sun"></i></button>
                <button class="icon-btn" id="color-toggle"><i class="fas fa-palette"></i></button>
                <button class="icon-btn" id="font-size-toggle"><i class="fas fa-text-height"></i></button>
            </div>
        </header>

        <nav class="nav-tabs">
            <a href="#" class="nav-tab active" data-tab="surahs" id="nav-surahs">السور</a>
            <a href="#" class="nav-tab" data-tab="seerah" id="nav-seerah">السيرة النبوية</a>
            <a href="#" class="nav-tab" data-tab="adhkar" id="nav-adhkar">الأذكار</a>
            <a href="#" class="nav-tab" data-tab="tasbih" id="nav-tasbih">السبحة</a>
            <a href="#" class="nav-tab" data-tab="settings" id="nav-settings">المزيد</a>
        </nav>

        <main class="main-content">
            <!-- صفحة السور -->
            <div class="tab-content active" id="surahs-tab">
                <div class="search-container">
                    <input type="text" class="search-input" id="surah-search" placeholder="ابحث عن سورة...">
                    <i class="fas fa-search search-icon"></i>
                </div>
                <div id="surahs-list">
                    <div id="surahs-container">
                        <!-- سيتم ملء السور هنا -->
                    </div>
                </div>
            </div>

            <!-- صفحة السيرة النبوية -->
            <div class="tab-content" id="seerah-tab">
                <div class="seerah-categories">
                    <!-- سيتم ملء السيرة النبوية هنا -->
                </div>
            </div>

            <!-- صفحة الأذكار -->
            <div class="tab-content" id="adhkar-tab">
                <div class="adhkar-categories">
                    <!-- سيتم ملء الأذكار هنا -->
                </div>
            </div>

            <!-- صفحة السبحة -->
            <div class="tab-content" id="tasbih-tab">
                <div class="tasbih-categories">
                    <!-- سيتم ملء السبحة هنا -->
                </div>
            </div>

            <!-- صفحة المزيد -->
            <div class="tab-content" id="settings-tab">
                <div class="app-info">
                    <div class="app-name">كـــلـــمـــة</div>
                    <div class="app-version">الإصدار 1.1.0</div>
                    <div class="app-description">
                        تطبيق كلمة هو تطبيق شامل للقرآن الكريم يتيح لك تلاوة القرآن، الاستماع إليه، 
                        والتعرف على السيرة النبوية والأذكار اليومية.
                    </div>
                    <div class="app-sources">المصادر: تم الاستعانة بمكتبة بديلة للقرآن الكريم في حال فشل في جلب البيانات</div>
                    <div class="app-contact">
                        <button class="contact-btn" id="contact-email">
                            <i class="fas fa-envelope"></i>
                            <span id="email-text">البريد الإلكتروني</span>
                        </button>
                        <button class="contact-btn" id="contact-telegram">
                            <i class="fab fa-telegram"></i>
                            <span id="telegram-text">تلغرام</span>
                        </button>
                    </div>
                </div>

                <div class="more-section">
                    <h3><i class="fas fa-share-alt"></i> مشاركة التطبيق</h3>
                    <div class="more-item" id="share-app">
                        <div class="more-item-content">
                            <div class="more-item-icon">
                                <i class="fas fa-share"></i>
                            </div>
                            <div class="more-item-text">
                                <div class="more-item-title">مشاركة التطبيق</div>
                                <div class="more-item-desc">شارك التطبيق مع أصدقائك وعائلتك</div>
                            </div>
                        </div>
                        <div class="more-item-arrow">
                            <i class="fas fa-chevron-left"></i>
                        </div>
                    </div>
                </div>

                <div class="more-section">
                    <h3><i class="fas fa-info-circle"></i> معلومات إضافية</h3>
                    <div class="more-item" id="privacy-policy">
                        <div class="more-item-content">
                            <div class="more-item-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="more-item-text">
                                <div class="more-item-title">سياسة الخصوصية</div>
                                <div class="more-item-desc">اطلع على سياسة الخصوصية الخاصة بنا</div>
                            </div>
                        </div>
                        <div class="more-item-arrow">
                            <i class="fas fa-chevron-left"></i>
                        </div>
                    </div>
                    <div class="more-item" id="about-app">
                        <div class="more-item-content">
                            <div class="more-item-icon">
                                <i class="fas fa-info"></i>
                            </div>
                            <div class="more-item-text">
                                <div class="more-item-title">عن التطبيق</div>
                                <div class="more-item-desc">تعرف على المزيد حول تطبيق كلمة</div>
                            </div>
                        </div>
                        <div class="more-item-arrow">
                            <i class="fas fa-chevron-left"></i>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p id="footer-text">كلمة - تطبيق القرآن الكريم © 2025</p>
        </footer>
    </div>

    <script>
        // بيانات السور الكاملة (114 سورة)
        const surahs = [
            { number: 1, name: "الفاتحة", englishName: "Al-Fatiha", ayahs: 7, type: "مكية" },
            { number: 2, name: "البقرة", englishName: "Al-Baqarah", ayahs: 286, type: "مدنية" },
            { number: 3, name: "آل عمران", englishName: "Aal Imran", ayahs: 200, type: "مدنية" },
            { number: 4, name: "النساء", englishName: "An-Nisa", ayahs: 176, type: "مدنية" },
            { number: 5, name: "المائدة", englishName: "Al-Maidah", ayahs: 120, type: "مدنية" },
            { number: 6, name: "الأنعام", englishName: "Al-An'am", ayahs: 165, type: "مكية" },
            { number: 7, name: "الأعراف", englishName: "Al-A'raf", ayahs: 206, type: "مكية" },
            { number: 8, name: "الأنفال", englishName: "Al-Anfal", ayahs: 75, type: "مدنية" },
            { number: 9, name: "التوبة", englishName: "At-Tawbah", ayahs: 129, type: "مدنية" },
            { number: 10, name: "يونس", englishName: "Yunus", ayahs: 109, type: "مكية" },
            { number: 11, name: "هود", englishName: "Hud", ayahs: 123, type: "مكية" },
            { number: 12, name: "يوسف", englishName: "Yusuf", ayahs: 111, type: "مكية" },
            { number: 13, name: "الرعد", englishName: "Ar-Ra'd", ayahs: 43, type: "مدنية" },
            { number: 14, name: "إبراهيم", englishName: "Ibrahim", ayahs: 52, type: "مكية" },
            { number: 15, name: "الحجر", englishName: "Al-Hijr", ayahs: 99, type: "مكية" },
            { number: 16, name: "النحل", englishName: "An-Nahl", ayahs: 128, type: "مكية" },
            { number: 17, name: "الإسراء", englishName: "Al-Isra", ayahs: 111, type: "مكية" },
            { number: 18, name: "الكهف", englishName: "Al-Kahf", ayahs: 110, type: "مكية" },
            { number: 19, name: "مريم", englishName: "Maryam", ayahs: 98, type: "مكية" },
            { number: 20, name: "طه", englishName: "Taha", ayahs: 135, type: "مكية" },
            { number: 21, name: "الأنبياء", englishName: "Al-Anbiya", ayahs: 112, type: "مكية" },
            { number: 22, name: "الحج", englishName: "Al-Hajj", ayahs: 78, type: "مدنية" },
            { number: 23, name: "المؤمنون", englishName: "Al-Muminun", ayahs: 118, type: "مكية" },
            { number: 24, name: "النور", englishName: "An-Nur", ayahs: 64, type: "مدنية" },
            { number: 25, name: "الفرقان", englishName: "Al-Furqan", ayahs: 77, type: "مكية" },
            { number: 26, name: "الشعراء", englishName: "Ash-Shu'ara", ayahs: 227, type: "مكية" },
            { number: 27, name: "النمل", englishName: "An-Naml", ayahs: 93, type: "مكية" },
            { number: 28, name: "القصص", englishName: "Al-Qasas", ayahs: 88, type: "مكية" },
            { number: 29, name: "العنكبوت", englishName: "Al-Ankabut", ayahs: 69, type: "مكية" },
            { number: 30, name: "الروم", englishName: "Ar-Rum", ayahs: 60, type: "مكية" },
            { number: 31, name: "لقمان", englishName: "Luqman", ayahs: 34, type: "مكية" },
            { number: 32, name: "السجدة", englishName: "As-Sajdah", ayahs: 30, type: "مكية" },
            { number: 33, name: "الأحزاب", englishName: "Al-Ahzab", ayahs: 73, type: "مدنية" },
            { number: 34, name: "سبإ", englishName: "Saba", ayahs: 54, type: "مكية" },
            { number: 35, name: "فاطر", englishName: "Fatir", ayahs: 45, type: "مكية" },
            { number: 36, name: "يس", englishName: "Ya-Sin", ayahs: 83, type: "مكية" },
            { number: 37, name: "الصافات", englishName: "As-Saffat", ayahs: 182, type: "مكية" },
            { number: 38, name: "ص", englishName: "Sad", ayahs: 88, type: "مكية" },
            { number: 39, name: "الزمر", englishName: "Az-Zumar", ayahs: 75, type: "مكية" },
            { number: 40, name: "غافر", englishName: "Ghafir", ayahs: 85, type: "مكية" },
            { number: 41, name: "فصلت", englishName: "Fussilat", ayahs: 54, type: "مكية" },
            { number: 42, name: "الشورى", englishName: "Ash-Shura", ayahs: 53, type: "مكية" },
            { number: 43, name: "الزخرف", englishName: "Az-Zukhruf", ayahs: 89, type: "مكية" },
            { number: 44, name: "الدخان", englishName: "Ad-Dukhan", ayahs: 59, type: "مكية" },
            { number: 45, name: "الجاثية", englishName: "Al-Jathiya", ayahs: 37, type: "مكية" },
            { number: 46, name: "الأحقاف", englishName: "Al-Ahqaf", ayahs: 35, type: "مكية" },
            { number: 47, name: "محمد", englishName: "Muhammad", ayahs: 38, type: "مدنية" },
            { number: 48, name: "الفتح", englishName: "Al-Fath", ayahs: 29, type: "مدنية" },
            { number: 49, name: "الحجرات", englishName: "Al-Hujurat", ayahs: 18, type: "مدنية" },
            { number: 50, name: "ق", englishName: "Qaf", ayahs: 45, type: "مكية" },
            { number: 51, name: "الذاريات", englishName: "Adh-Dhariyat", ayahs: 60, type: "مكية" },
            { number: 52, name: "الطور", englishName: "At-Tur", ayahs: 49, type: "مكية" },
            { number: 53, name: "النجم", englishName: "An-Najm", ayahs: 62, type: "مكية" },
            { number: 54, name: "القمر", englishName: "Al-Qamar", ayahs: 55, type: "مكية" },
            { number: 55, name: "الرحمن", englishName: "Ar-Rahman", ayahs: 78, type: "مدنية" },
            { number: 56, name: "الواقعة", englishName: "Al-Waqi'ah", ayahs: 96, type: "مكية" },
            { number: 57, name: "الحديد", englishName: "Al-Hadid", ayahs: 29, type: "مدنية" },
            { number: 58, name: "المجادلة", englishName: "Al-Mujadila", ayahs: 22, type: "مدنية" },
            { number: 59, name: "الحشر", englishName: "Al-Hashr", ayahs: 24, type: "مدنية" },
            { number: 60, name: "الممتحنة", englishName: "Al-Mumtahanah", ayahs: 13, type: "مدنية" },
            { number: 61, name: "الصف", englishName: "As-Saf", ayahs: 14, type: "مدنية" },
            { number: 62, name: "الجمعة", englishName: "Al-Jumu'ah", ayahs: 11, type: "مدنية" },
            { number: 63, name: "المنافقون", englishName: "Al-Munafiqun", ayahs: 11, type: "مدنية" },
            { number: 64, name: "التغابن", englishName: "At-Taghabun", ayahs: 18, type: "مدنية" },
            { number: 65, name: "الطلاق", englishName: "At-Talaq", ayahs: 12, type: "مدنية" },
            { number: 66, name: "التحريم", englishName: "At-Tahrim", ayahs: 12, type: "مدنية" },
            { number: 67, name: "الملك", englishName: "Al-Mulk", ayahs: 30, type: "مكية" },
            { number: 68, name: "القلم", englishName: "Al-Qalam", ayahs: 52, type: "مكية" },
            { number: 69, name: "الحاقة", englishName: "Al-Haqqah", ayahs: 52, type: "مكية" },
            { number: 70, name: "المعارج", englishName: "Al-Ma'arij", ayahs: 44, type: "مكية" },
            { number: 71, name: "نوح", englishName: "Nuh", ayahs: 28, type: "مكية" },
            { number: 72, name: "الجن", englishName: "Al-Jinn", ayahs: 28, type: "مكية" },
            { number: 73, name: "المزمل", englishName: "Al-Muzzammil", ayahs: 20, type: "مكية" },
            { number: 74, name: "المدثر", englishName: "Al-Muddathir", ayahs: 56, type: "مكية" },
            { number: 75, name: "القيامة", englishName: "Al-Qiyamah", ayahs: 40, type: "مكية" },
            { number: 76, name: "الإنسان", englishName: "Al-Insan", ayahs: 31, type: "مدنية" },
            { number: 77, name: "المرسلات", englishName: "Al-Mursalat", ayahs: 50, type: "مكية" },
            { number: 78, name: "النبأ", englishName: "An-Naba", ayahs: 40, type: "مكية" },
            { number: 79, name: "النازعات", englishName: "An-Nazi'at", ayahs: 46, type: "مكية" },
            { number: 80, name: "عبس", englishName: "Abasa", ayahs: 42, type: "مكية" },
            { number: 81, name: "التكوير", englishName: "At-Takwir", ayahs: 29, type: "مكية" },
            { number: 82, name: "الانفطار", englishName: "Al-Infitar", ayahs: 19, type: "مكية" },
            { number: 83, name: "المطففين", englishName: "Al-Mutaffifin", ayahs: 36, type: "مكية" },
            { number: 84, name: "الانشقاق", englishName: "Al-Inshiqaq", ayahs: 25, type: "مكية" },
            { number: 85, name: "البروج", englishName: "Al-Buruj", ayahs: 22, type: "مكية" },
            { number: 86, name: "الطارق", englishName: "At-Tariq", ayahs: 17, type: "مكية" },
            { number: 87, name: "الأعلى", englishName: "Al-A'la", ayahs: 19, type: "مكية" },
            { number: 88, name: "الغاشية", englishName: "Al-Ghashiyah", ayahs: 26, type: "مكية" },
            { number: 89, name: "الفجر", englishName: "Al-Fajr", ayahs: 30, type: "مكية" },
            { number: 90, name: "البلد", englishName: "Al-Balad", ayahs: 20, type: "مكية" },
            { number: 91, name: "الشمس", englishName: "Ash-Shams", ayahs: 15, type: "مكية" },
            { number: 92, name: "الليل", englishName: "Al-Layl", ayahs: 21, type: "مكية" },
            { number: 93, name: "الضحى", englishName: "Ad-Duha", ayahs: 11, type: "مكية" },
            { number: 94, name: "الشرح", englishName: "Ash-Sharh", ayahs: 8, type: "مكية" },
            { number: 95, name: "التين", englishName: "At-Tin", ayahs: 8, type: "مكية" },
            { number: 96, name: "العلق", englishName: "Al-Alaq", ayahs: 19, type: "مكية" },
            { number: 97, name: "القدر", englishName: "Al-Qadr", ayahs: 5, type: "مكية" },
            { number: 98, name: "البينة", englishName: "Al-Bayyinah", ayahs: 8, type: "مدنية" },
            { number: 99, name: "الزلزلة", englishName: "Az-Zalzalah", ayahs: 8, type: "مدنية" },
            { number: 100, name: "العاديات", englishName: "Al-Adiyat", ayahs: 11, type: "مكية" },
            { number: 101, name: "القارعة", englishName: "Al-Qari'ah", ayahs: 11, type: "مكية" },
            { number: 102, name: "التكاثر", englishName: "At-Takathur", ayahs: 8, type: "مكية" },
            { number: 103, name: "العصر", englishName: "Al-Asr", ayahs: 3, type: "مكية" },
            { number: 104, name: "الهمزة", englishName: "Al-Humazah", ayahs: 9, type: "مكية" },
            { number: 105, name: "الفيل", englishName: "Al-Fil", ayahs: 5, type: "مكية" },
            { number: 106, name: "قريش", englishName: "Quraysh", ayahs: 4, type: "مكية" },
            { number: 107, name: "الماعون", englishName: "Al-Ma'un", ayahs: 7, type: "مكية" },
            { number: 108, name: "الكوثر", englishName: "Al-Kawthar", ayahs: 3, type: "مكية" },
            { number: 109, name: "الكافرون", englishName: "Al-Kafirun", ayahs: 6, type: "مكية" },
            { number: 110, name: "النصر", englishName: "An-Nasr", ayahs: 3, type: "مدنية" },
            { number: 111, name: "المسد", englishName: "Al-Masad", ayahs: 5, type: "مكية" },
            { number: 112, name: "الإخلاص", englishName: "Al-Ikhlas", ayahs: 4, type: "مكية" },
            { number: 113, name: "الفلق", englishName: "Al-Falaq", ayahs: 5, type: "مكية" },
            { number: 114, name: "الناس", englishName: "An-Nas", ayahs: 6, type: "مكية" }
        ];

        // بيانات السيرة النبوية
        const seerahData = [
            { title: "مولد النبي ﷺ", content: "ولد النبي محمد ﷺ في مكة في عام الفيل، يوم الاثنين 12 ربيع الأول." },
            { title: "نشأة النبي ﷺ", content: "نشأ النبي ﷺ يتيماً حيث توفي أبوه عبد الله قبل مولده، وتوفيت أمه آمنة وهو في السادسة من عمره." },
            { title: "بعثة النبي ﷺ", content: "بعث النبي ﷺ رسولاً عند بلوغه الأربعين من عمره، نزل عليه الوحي في غار حراء." },
            { title: "الدعوة السرية", content: "استمرت الدعوة سراً لمدة ثلاث سنوات، كان يدعو فيها الأقربين والأصدقاء." },
            { title: "الدعوة الجهرية", content: "بدأت الدعوة الجهرية عندما نزل قوله تعالى: 'فاصدع بما تؤمر وأعرض عن المشركين'." },
            { title: "الهجرة إلى المدينة", content: "هاجر النبي ﷺ من مكة إلى المدينة المنورة بعد ثلاث عشرة سنة من الدعوة في مكة." },
            { title: "غزوات النبي ﷺ", content: "شارك النبي ﷺ في العديد من الغزوات أهمها بدر وأحد والخندق وفتح مكة." },
            { title: "حجة الوداع", content: "أدى النبي ﷺ حجة الوداع في السنة العاشرة للهجرة وترك فيها وصاياه للأمة." },
            { title: "وفاة النبي ﷺ", content: "توفي النبي ﷺ في المدينة المنورة يوم الاثنين 12 ربيع الأول سنة 11 للهجرة." }
        ];

        // بيانات الأذكار
        const adhkarData = [
            { title: "أذكار الصباح", content: "أصبحنا وأصبح الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له..." },
            { title: "أذكار المساء", content: "أمسينا وأمسى الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له..." },
            { title: "أذكار النوم", content: "باسمك اللهم أموت وأحيا، إذا أوى إلى فراشه..." },
            { title: "أذكار الاستيقاظ", content: "الحمد لله الذي أحيانا بعد ما أماتنا وإليه النشور..." },
            { title: "أذكار الصلاة", content: "سبحان الله، الحمد لله، الله أكبر، لا إله إلا الله..." },
            { title: "أذكار الخروج من المنزل", content: "بسم الله، توكلت على الله، ولا حول ولا قوة إلا بالله..." },
            { title: "أذكار دخول المنزل", content: "بسم الله ولجنا، وبسم الله خرجنا، وعلى ربنا توكلنا..." }
        ];

        // بيانات السبحة
        const tasbihData = [
            { name: "سبحان الله", target: 33, current: 0 },
            { name: "الحمد لله", target: 33, current: 0 },
            { name: "الله أكبر", target: 33, current: 0 },
            { name: "لا إله إلا الله", target: 100, current: 0 },
            { name: "أستغفر الله", target: 100, current: 0 },
            { name: "لا حول ولا قوة إلا بالله", target: 100, current: 0 },
            { name: "اللهم صل على محمد", target: 100, current: 0 }
        ];

        // جميع الترجمات للغات المطلوبة (7 لغات فقط)
        const translations = {
            ar: { code: 'ar', name: 'العربية', dir: 'rtl' },
            en: { code: 'en', name: 'English', dir: 'ltr' },
            tr: { code: 'tr', name: 'Türkçe', dir: 'ltr' },
            ru: { code: 'ru', name: 'Русский', dir: 'ltr' },
            id: { code: 'id', name: 'Indonesia', dir: 'ltr' },
            fa: { code: 'fa', name: 'فارسی', dir: 'rtl' },
            ur: { code: 'ur', name: 'اردو', dir: 'rtl' }
        };

        // نصوص التطبيق بجميع اللغات (7 لغات فقط)
        const appTexts = {
            // العربية
            ar: {
                appTitle: "كـــلـــمـــة",
                footer: "كلمة - تطبيق القرآن الكريم © 2025",
                nav: {
                    surahs: "السور",
                    seerah: "السيرة النبوية", 
                    adhkar: "الأذكار",
                    tasbih: "السبحة",
                    settings: "المزيد"
                },
                search: "ابحث عن سورة...",
                loading: "جاري تحميل الآيات...",
                back: "العودة إلى قائمة السور",
                controls: {
                    prev: "السورة السابقة",
                    next: "السورة التالية"
                },
                resume: {
                    title: "استئناف القراءة",
                    message: "آخر آية قرأتها: الآية {ayah} من سورة {surah}",
                    continue: "المتابعة من هنا",
                    new: "بدء جديد"
                },
                saveAyah: "حفظ الآية",
                saveConfirm: "هل تريد حفظ الآية {ayah} من سورة {surah} للعودة إليها لاحقاً؟",
                yes: "نعم",
                no: "لا",
                speed: "السرعة",
                play: "تشغيل",
                pause: "إيقاف",
                tapToCount: "اضغط للعد",
                target: "الهدف",
                lastAyah: "آخر آية تم النقر عليها: الآية {ayah} من سورة {surah}",
                reset: "إعادة",
                email: "البريد الإلكتروني",
                telegram: "تلغرام"
            },
            // الإنجليزية
            en: {
                appTitle: "K A L I M A H",
                footer: "Kalimah - Quran App © 2025",
                nav: {
                    surahs: "Surahs",
                    seerah: "Prophet's Biography", 
                    adhkar: "Remembrances",
                    tasbih: "Tasbih",
                    settings: "More"
                },
                search: "Search for a surah...",
                loading: "Loading verses...",
                back: "Back to Surahs List",
                controls: {
                    prev: "Previous Surah",
                    next: "Next Surah"
                },
                resume: {
                    title: "Resume Reading",
                    message: "Last verse you read: Verse {ayah} from Surah {surah}",
                    continue: "Continue from here",
                    new: "Start New"
                },
                saveAyah: "Save Verse",
                saveConfirm: "Do you want to save verse {ayah} from Surah {surah} to return to it later?",
                yes: "Yes",
                no: "No",
                speed: "Speed",
                play: "Play",
                pause: "Pause",
                tapToCount: "Tap to count",
                target: "Target",
                lastAyah: "Last clicked verse: Verse {ayah} from Surah {surah}",
                reset: "Reset",
                email: "Email",
                telegram: "Telegram"
            },
            // التركية
            tr: {
                appTitle: "K E L İ M E",
                footer: "Kalime - Kur'an Uygulaması © 2025",
                nav: {
                    surahs: "Sureler",
                    seerah: "Peygamberin Hayatı", 
                    adhkar: "Zikirler",
                    tasbih: "Tesbih",
                    settings: "Daha Fazla"
                },
                search: "Sure ara...",
                loading: "Ayetler yükleniyor...",
                back: "Sure Listesine Dön",
                controls: {
                    prev: "Önceki Sure",
                    next: "Sonraki Sure"
                },
                resume: {
                    title: "Okumaya Devam Et",
                    message: "Okuduğunuz son ayet: {surah} Suresi {ayah}. Ayet",
                    continue: "Buradan Devam Et",
                    new: "Yeni Başla"
                },
                saveAyah: "Ayeti Kaydet",
                saveConfirm: "{surah} Suresi {ayah}. ayeti daha sonra dönmek üzere kaydetmek istiyor musunuz?",
                yes: "Evet",
                no: "Hayır",
                speed: "Hız",
                play: "Oynat",
                pause: "Duraklat",
                tapToCount: "Saymak için dokun",
                target: "Hedef",
                lastAyah: "Son tıklanan ayet: {surah} Suresi {ayah}. Ayet",
                reset: "Sıfırla",
                email: "E-posta",
                telegram: "Telegram"
            },
            // الروسية
            ru: {
                appTitle: "К А Л И М А",
                footer: "Калима - Приложение Корана © 2025",
                nav: {
                    surahs: "Суры",
                    seerah: "Биография Пророка", 
                    adhkar: "Поминания",
                    tasbih: "Тасбих",
                    settings: "Еще"
                },
                search: "Поиск суры...",
                loading: "Загрузка аятов...",
                back: "Назад к списку сур",
                controls: {
                    prev: "Предыдущая сура",
                    next: "Следующая сура"
                },
                resume: {
                    title: "Продолжить чтение",
                    message: "Последний аят, который вы читали: Аят {ayah} из суры {surah}",
                    continue: "Продолжить отсюда",
                    new: "Начать заново"
                },
                saveAyah: "Сохранить аят",
                saveConfirm: "Вы хотите сохранить аят {ayah} из суры {surah} для возврата к нему позже?",
                yes: "Да",
                no: "Нет",
                speed: "Скорость",
                play: "Воспроизвести",
                pause: "Пауза",
                tapToCount: "Нажмите для подсчета",
                target: "Цель",
                lastAyah: "Последний нажатый аят: Аят {ayah} из суры {surah}",
                reset: "Сброс",
                email: "Эл. почта",
                telegram: "Телеграм"
            },
            // الإندونيسية
            id: {
                appTitle: "K A L I M A H",
                footer: "Kalimah - Aplikasi Al-Quran © 2025",
                nav: {
                    surahs: "Surah",
                    seerah: "Sirah Nabawiyah", 
                    adhkar: "Dzikir",
                    tasbih: "Tasbih",
                    settings: "Lainnya"
                },
                search: "Cari surah...",
                loading: "Memuat ayat...",
                back: "Kembali ke Daftar Surah",
                controls: {
                    prev: "Surah Sebelumnya",
                    next: "Surah Berikutnya"
                },
                resume: {
                    title: "Lanjutkan Membaca",
                    message: "Ayat terakhir yang Anda baca: Ayat {ayah} dari Surah {surah}",
                    continue: "Lanjutkan dari sini",
                    new: "Mulai Baru"
                },
                saveAyah: "Simpan Ayat",
                saveConfirm: "Simpan ayat {ayah} dari Surah {surah} untuk dilanjutkan nanti?",
                yes: "Ya",
                no: "Tidak",
                speed: "Kecepatan",
                play: "Main",
                pause: "Jeda",
                tapToCount: "Ketuk untuk menghitung",
                target: "Target",
                lastAyah: "Ayat terakhir yang diklik: Ayat {ayah} dari Surah {surah}",
                reset: "Reset",
                email: "Email",
                telegram: "Telegram"
            },
            // الفارسية
            fa: {
                appTitle: "کـــلـــمـــه",
                footer: "کلمه - برنامه قرآن کریم © ۲۰۲۵",
                nav: {
                    surahs: "سوره‌ها",
                    seerah: "سیره نبوی", 
                    adhkar: "اذکار",
                    tasbih: "تسبیح",
                    settings: "بیشتر"
                },
                search: "جستجوی سوره...",
                loading: "در حال بارگذاری آیات...",
                back: "بازگشت به فهرست سوره‌ها",
                controls: {
                    prev: "سوره قبلی",
                    next: "سوره بعدی"
                },
                resume: {
                    title: "ادامه خواندن",
                    message: "آخرین آیه‌ای که خواندید: آیه {ayah} از سوره {surah}",
                    continue: "ادامه از اینجا",
                    new: "شروع جدید"
                },
                saveAyah: "ذخیره آیه",
                saveConfirm: "آیا می‌خواهید آیه {ayah} از سوره {surah} را برای ادامه بعدی ذخیره کنید؟",
                yes: "بله", 
                no: "خیر",
                speed: "سرعت",
                play: "پخش",
                pause: "توقف",
                tapToCount: "برای شمارش کلیک کنید",
                target: "هدف",
                lastAyah: "آخرین آیه کلیک شده: آیه {ayah} از سوره {surah}",
                reset: "بازنشانی",
                email: "ایمیل",
                telegram: "تلگرام"
            },
            // الأردية
            ur: {
                appTitle: "کـــلـــمـــہ",
                footer: "کلمہ - قرآن ایپ © ۲۰۲۵",
                nav: {
                    surahs: "سورتیں",
                    seerah: "سیرت النبی", 
                    adhkar: "اذکار",
                    tasbih: "تسبیح",
                    settings: "مزید"
                },
                search: "سورت تلاش کریں...",
                loading: "آیات لوڈ ہو رہی ہیں...",
                back: "سورتوں کی فہرست پر واپس جائیں",
                controls: {
                    prev: "پچھلی سورت",
                    next: "اگلی سورت"
                },
                resume: {
                    title: "پڑھنا جاری رکھیں",
                    message: "آپ کی آخری پڑھی ہوئی آیت: سورت {surah} کی آیت {ayah}",
                    continue: "یہاں سے جاری رکھیں",
                    new: "نیا آغاز"
                },
                saveAyah: "آیت محفوظ کریں",
                saveConfirm: "کیا آپ سورت {surah} کی آیت {ayah} کو بعد میں پڑھنے کے لیے محفوظ کرنا چاہتے ہیں؟",
                yes: "جی ہاں",
                no: "نہیں",
                speed: "رفتار",
                play: "چلائیں",
                pause: "روکیں",
                tapToCount: "گنتی کے لیے ٹیپ کریں",
                target: "ہدف",
                lastAyah: "آخری کلک کی گئی آیت: سورت {surah} کی آیت {ayah}",
                reset: "دوبارہ ترتیب دیں",
                email: "ای میل",
                telegram: "ٹیلی گرام"
            }
        };

        // المتغيرات للتحكم في الإعدادات
        const themes = ['black', 'blue', 'green', 'red', 'purple', 'gold'];
        const fontSizes = ['small', 'medium', 'large', 'xlarge'];

        let currentThemeIndex = 0;
        let currentFontSizeIndex = 1;
        let autoScrollInterval = null;
        let autoScrollSpeed = 50;
        let isAutoScrolling = false;
        let savedAyah = null;
        let appInitialized = false;
        let currentLanguage = 'ar';
        let lastAyahText = '';
        let lastClickedAyah = null;

        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            
            function initializeApp() {
                loadSettings();
                setupLanguagesMenu();
                displaySurahs();
                displaySeerah();
                displayAdhkar();
                displayTasbih();
                setupEventListeners();
                
                if (!appInitialized) {
                    checkForSavedAyah();
                    appInitialized = true;
                }
            }
            
            function loadSettings() {
                const theme = localStorage.getItem('theme') || 'black';
                const fontSize = localStorage.getItem('fontSize') || 'medium';
                const savedAyahData = localStorage.getItem('savedAyah');
                const language = localStorage.getItem('language') || 'ar';
                const lastAyah = localStorage.getItem('lastAyahText');
                const lastClickedAyahData = localStorage.getItem('lastClickedAyah');
                const lightMode = localStorage.getItem('lightMode') === 'true';
                
                currentThemeIndex = themes.indexOf(theme);
                currentFontSizeIndex = fontSizes.indexOf(fontSize);
                currentLanguage = language;
                lastAyahText = lastAyah || '';
                
                if (lightMode) {
                    document.body.classList.add('light-mode');
                    document.querySelector('#theme-toggle i').className = 'fas fa-moon';
                }
                
                if (savedAyahData) {
                    savedAyah = JSON.parse(savedAyahData);
                }
                
                if (lastClickedAyahData) {
                    lastClickedAyah = JSON.parse(lastClickedAyahData);
                }
                
                applyTheme();
                applyFontSize();
                applyLanguage();
            }
            
            function saveSettings() {
                localStorage.setItem('theme', themes[currentThemeIndex]);
                localStorage.setItem('fontSize', fontSizes[currentFontSizeIndex]);
                localStorage.setItem('language', currentLanguage);
                localStorage.setItem('lightMode', document.body.classList.contains('light-mode'));
                if (savedAyah) {
                    localStorage.setItem('savedAyah', JSON.stringify(savedAyah));
                }
                if (lastAyahText) {
                    localStorage.setItem('lastAyahText', lastAyahText);
                }
                if (lastClickedAyah) {
                    localStorage.setItem('lastClickedAyah', JSON.stringify(lastClickedAyah));
                }
            }
            
            function applyTheme() {
                document.body.className = document.body.className.replace(/theme-\w+/g, '');
                document.body.classList.add(`theme-${themes[currentThemeIndex]}`);
            }
            
            function applyFontSize() {
                document.body.className = document.body.className.replace(/font-size-\w+/g, '');
                document.body.classList.add(`font-size-${fontSizes[currentFontSizeIndex]}`);
            }
            
            function applyLanguage() {
                const langData = translations[currentLanguage];
                document.documentElement.dir = langData.dir;
                document.documentElement.lang = currentLanguage;
                
                updateUITexts();
            }
            
            function updateUITexts() {
                const t = appTexts[currentLanguage] || appTexts.ar;
                
                // تحديث النصوص الرئيسية
                document.getElementById('app-title').textContent = t.appTitle;
                document.getElementById('footer-text').textContent = t.footer;
                document.getElementById('language-toggle').textContent = translations[currentLanguage].name;
                
                // تحديث عناصر التنقل
                document.getElementById('nav-surahs').textContent = t.nav.surahs;
                document.getElementById('nav-seerah').textContent = t.nav.seerah;
                document.getElementById('nav-adhkar').textContent = t.nav.adhkar;
                document.getElementById('nav-tasbih').textContent = t.nav.tasbih;
                document.getElementById('nav-settings').textContent = t.nav.settings;
                
                // تحديث حقل البحث
                const searchInput = document.getElementById('surah-search');
                if (searchInput) {
                    searchInput.placeholder = t.search;
                }
                
                // تحديث نصوص البريد والتلغرام
                const emailText = document.getElementById('email-text');
                const telegramText = document.getElementById('telegram-text');
                if (emailText) emailText.textContent = t.email;
                if (telegramText) telegramText.textContent = t.telegram;
            }
            
            function setupLanguagesMenu() {
                const languageMenu = document.getElementById('language-menu');
                languageMenu.innerHTML = '';
                
                Object.values(translations).forEach(lang => {
                    const option = document.createElement('div');
                    option.className = 'language-option';
                    option.textContent = lang.name;
                    option.dataset.lang = lang.code;
                    languageMenu.appendChild(option);
                });
            }
            
            function displaySurahs() {
                const container = document.getElementById('surahs-container');
                if (!container) return;
                
                container.innerHTML = '';
                
                const t = appTexts[currentLanguage] || appTexts.ar;
                const ayahsText = currentLanguage === 'ar' ? 'آيات' : 'Verses';
                
                surahs.forEach(surah => {
                    const card = document.createElement('div');
                    card.className = 'surah-card';
                    card.setAttribute('data-surah', surah.number);
                    
                    card.innerHTML = `
                        <div class="surah-header">
                            <div class="surah-number">${surah.number}</div>
                            <div class="surah-name">سورة ${surah.name}</div>
                        </div>
                        <div class="surah-name-english">${surah.englishName}</div>
                        <div class="surah-details">
                            <span class="surah-type">${surah.type}</span>
                            <span>${surah.ayahs} ${ayahsText}</span>
                        </div>
                    `;
                    
                    card.addEventListener('click', function() {
                        openSurahPage(surah.number);
                    });
                    
                    container.appendChild(card);
                });
            }
            
            function openSurahPage(surahNumber, ayahNumber = null) {
                const surah = surahs.find(s => s.number == surahNumber);
                const t = appTexts[currentLanguage] || appTexts.ar;
                const ayahsText = currentLanguage === 'ar' ? 'آيات' : 'Verses';
                
                const surahsTab = document.getElementById('surahs-tab');
                surahsTab.innerHTML = `
                    <button class="back-button" id="back-to-surahs">
                        <i class="fas fa-arrow-right"></i>
                        ${t.back}
                    </button>
                    <div class="ayahs-container-wrapper">
                        <div class="surahs-sidebar" id="surahs-sidebar">
                            ${surahs.map(s => `
                                <div class="surahs-sidebar-item ${s.number == surahNumber ? 'active' : ''}" 
                                     data-surah="${s.number}">
                                    ${s.number}. ${s.name}
                                </div>
                            `).join('')}
                        </div>
                        <div class="reading-container">
                            <div class="reading-header">
                                <h2 id="reading-surah-name">سورة ${surah.name}</h2>
                                <div id="reading-surah-details">${surah.type} - ${surah.ayahs} ${ayahsText}</div>
                            </div>
                            <div class="speed-control-container">
                                <div class="speed-slider-container">
                                    <span class="speed-display">${autoScrollSpeed}</span>
                                    <input type="range" min="0" max="100" value="${autoScrollSpeed}" 
                                           class="speed-slider" id="speed-slider">
                                </div>
                            </div>
                            <div class="ayahs-container" id="ayahs-container">
                                <div class="loading">${t.loading}</div>
                            </div>
                            <div class="controls">
                                <button class="control-btn" id="prev-surah">
                                    <i class="fas fa-arrow-right"></i>
                                    ${t.controls.prev}
                                </button>
                                <button class="control-btn" id="next-surah">
                                    ${t.controls.next}
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('back-to-surahs').addEventListener('click', function() {
                    stopAutoScroll();
                    location.reload();
                });
                
                document.getElementById('prev-surah').addEventListener('click', function() {
                    stopAutoScroll();
                    const prevSurah = Math.max(1, parseInt(surahNumber) - 1);
                    openSurahPage(prevSurah);
                });
                
                document.getElementById('next-surah').addEventListener('click', function() {
                    stopAutoScroll();
                    const nextSurah = Math.min(114, parseInt(surahNumber) + 1);
                    openSurahPage(nextSurah);
                });
                
                // إعداد السلايدر - التعديل هنا
                const speedSlider = document.getElementById('speed-slider');
                const speedDisplay = document.querySelector('.speed-display');
                
                speedSlider.addEventListener('input', function() {
                    autoScrollSpeed = parseInt(this.value);
                    speedDisplay.textContent = autoScrollSpeed;
                    
                    // إذا كانت السرعة 0، توقف عن التمرير
                    if (autoScrollSpeed === 0) {
                        stopAutoScroll();
                    } else {
                        // إذا كان التمرير نشطاً، أعد تشغيله بالسرعة الجديدة
                        if (isAutoScrolling) {
                            stopAutoScroll();
                            startAutoScroll();
                        } else {
                            // إذا لم يكن نشطاً، ابدأ التمرير
                            startAutoScroll();
                        }
                    }
                });
                
                // بدء التمرير تلقائياً إذا كانت السرعة أكبر من 0
                if (autoScrollSpeed > 0) {
                    startAutoScroll();
                }
                
                document.querySelectorAll('.surahs-sidebar-item').forEach(item => {
                    item.addEventListener('click', function() {
                        stopAutoScroll();
                        const surahNum = this.dataset.surah;
                        openSurahPage(surahNum);
                    });
                });
                
                loadSurahAyahs(surahNumber, ayahNumber);
            }
            
            function startAutoScroll() {
                const container = document.getElementById('ayahs-container');
                if (!container || autoScrollSpeed === 0) return;
                
                stopAutoScroll();
                isAutoScrolling = true;
                
                // تحديد سرعات ثابتة لكل مستوى
                const speedLevels = {
                    0: 0,      // توقف
                    10: 200,   // بطيء جداً
                    20: 150,   // بطيء
                    30: 120,   // متوسط بطيء
                    40: 100,   // متوسط
                    50: 80,    // متوسط سريع
                    60: 60,    // سريع
                    70: 45,    // سريع جداً
                    80: 35,    // أسرع
                    90: 25,    // أسرع جداً
                    100: 15    // أقصى سرعة
                };
                
                // الحصول على الفاصل الزمني المناسب للسرعة الحالية
                let scrollInterval = speedLevels[autoScrollSpeed] || 80;
                
                // إذا كانت السرعة بين مستويين، استخدم متوسط الفاصل
                if (!speedLevels[autoScrollSpeed]) {
                    const levels = Object.keys(speedLevels).map(Number).sort((a, b) => a - b);
                    let lower = 0, upper = 100;
                    
                    for (let i = 0; i < levels.length; i++) {
                        if (autoScrollSpeed >= levels[i]) {
                            lower = levels[i];
                        }
                        if (autoScrollSpeed <= levels[i] && levels[i] > lower) {
                            upper = levels[i];
                            break;
                        }
                    }
                    
                    const ratio = (autoScrollSpeed - lower) / (upper - lower);
                    scrollInterval = speedLevels[lower] + (speedLevels[upper] - speedLevels[lower]) * ratio;
                }
                
                autoScrollInterval = setInterval(() => {
                    if (!container || !isAutoScrolling) return;
                    
                    container.scrollTop += 1;
                    
                    if (container.scrollTop >= container.scrollHeight - container.clientHeight) {
                        stopAutoScroll();
                        return;
                    }
                }, scrollInterval);
            }
            
            function stopAutoScroll() {
                isAutoScrolling = false;
                if (autoScrollInterval) {
                    clearInterval(autoScrollInterval);
                    autoScrollInterval = null;
                }
            }
            
            function displaySeerah() {
                const container = document.querySelector('.seerah-categories');
                if (!container) return;
                
                container.innerHTML = '';
                
                seerahData.forEach(category => {
                    const element = document.createElement('div');
                    element.className = 'seerah-category';
                    
                    element.innerHTML = `
                        <h3><i class="fas fa-book"></i> ${category.title}</h3>
                        <p>${category.content}</p>
                    `;
                    
                    container.appendChild(element);
                });
            }
            
            function displayAdhkar() {
                const container = document.querySelector('.adhkar-categories');
                if (!container) return;
                
                container.innerHTML = '';
                
                adhkarData.forEach(category => {
                    const element = document.createElement('div');
                    element.className = 'dhikr-category';
                    
                    element.innerHTML = `
                        <h3><i class="fas fa-pray"></i> ${category.title}</h3>
                        <p>${category.content}</p>
                    `;
                    
                    container.appendChild(element);
                });
            }
            
            function displayTasbih() {
                const container = document.querySelector('.tasbih-categories');
                if (!container) return;
                
                container.innerHTML = '';
                
                const t = appTexts[currentLanguage] || appTexts.ar;
                
                tasbihData.forEach((item, index) => {
                    const element = document.createElement('div');
                    element.className = 'tasbih-item';
                    element.setAttribute('data-index', index);
                    
                    element.innerHTML = `
                        <div class="tasbih-content">
                            <h3>${item.name}</h3>
                            <p>${t.tapToCount}</p>
                        </div>
                        <div class="tasbih-counter">
                            <div class="counter-display">${item.current}/${item.target}</div>
                            <div class="counter-target">${t.target}: ${item.target}</div>
                        </div>
                        <button class="reset-btn" data-index="${index}" title="${t.reset}">
                            <i class="fas fa-redo"></i>
                        </button>
                    `;
                    
                    container.appendChild(element);
                });
            }
            
            function setupEventListeners() {
                // التنقل بين التبويبات
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.addEventListener('click', function(e) {
                        e.preventDefault();
                        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        this.classList.add('active');
                        document.getElementById(`${this.dataset.tab}-tab`).classList.add('active');
                    });
                });
                
                // البحث في السور
                const searchInput = document.getElementById('surah-search');
                if (searchInput) {
                    searchInput.addEventListener('input', function() {
                        const searchTerm = this.value.trim().toLowerCase();
                        const surahCards = document.querySelectorAll('.surah-card');
                        
                        surahCards.forEach(card => {
                            const surahName = card.querySelector('.surah-name').textContent.toLowerCase();
                            const englishName = card.querySelector('.surah-name-english').textContent.toLowerCase();
                            
                            if (surahName.includes(searchTerm) || englishName.includes(searchTerm)) {
                                card.style.display = 'block';
                            } else {
                                card.style.display = 'none';
                            }
                        });
                    });
                }
                
                // تبديل الوضع الليلي/النهاري
                document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
                
                function toggleTheme() {
                    const icon = document.querySelector('#theme-toggle i');
                    if (document.body.classList.contains('light-mode')) {
                        document.body.classList.remove('light-mode');
                        icon.className = 'fas fa-sun';
                    } else {
                        document.body.classList.add('light-mode');
                        icon.className = 'fas fa-moon';
                    }
                    saveSettings();
                }
                
                // تغيير الألوان
                document.getElementById('color-toggle').addEventListener('click', function() {
                    currentThemeIndex = (currentThemeIndex + 1) % themes.length;
                    applyTheme();
                    saveSettings();
                });
                
                // تغيير حجم الخط
                document.getElementById('font-size-toggle').addEventListener('click', function() {
                    currentFontSizeIndex = (currentFontSizeIndex + 1) % fontSizes.length;
                    applyFontSize();
                    saveSettings();
                });
                
                // إعدادات اللغة
                const languageToggle = document.getElementById('language-toggle');
                const languageMenu = document.getElementById('language-menu');
                
                languageToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    languageMenu.classList.toggle('active');
                });
                
                document.querySelectorAll('.language-option').forEach(option => {
                    option.addEventListener('click', function() {
                        currentLanguage = this.dataset.lang;
                        applyLanguage();
                        saveSettings();
                        languageMenu.classList.remove('active');
                        
                        displaySurahs();
                        displaySeerah();
                        displayAdhkar();
                        displayTasbih();
                    });
                });
                
                document.addEventListener('click', function() {
                    languageMenu.classList.remove('active');
                });
                
                // السبحة
                document.addEventListener('click', function(e) {
                    if (e.target.closest('.tasbih-item')) {
                        const tasbihItem = e.target.closest('.tasbih-item');
                        const index = tasbihItem.dataset.index;
                        incrementTasbih(index);
                    }
                    
                    // زر إعادة العد
                    if (e.target.closest('.reset-btn')) {
                        e.stopPropagation();
                        const resetBtn = e.target.closest('.reset-btn');
                        const index = resetBtn.dataset.index;
                        resetTasbih(index);
                    }
                });
                
                // مشاركة التطبيق
                document.getElementById('share-app').addEventListener('click', function() {
                    if (navigator.share) {
                        navigator.share({
                            title: 'تطبيق كلمة - القرآن الكريم',
                            text: 'جرب تطبيق كلمة للقرآن الكريم، يحتوي على تلاوة القرآن، السيرة النبوية، الأذكار والسبحة',
                            url: 'https://exemple.com'
                        })
                        .then(() => console.log('تمت المشاركة بنجاح'))
                        .catch((error) => console.log('خطأ في المشاركة', error));
                    } else {
                        // نسخ الرابط إلى الحافظة
                        navigator.clipboard.writeText('https://exemple.com')
                            .then(() => {
                                alert('تم نسخ رابط التطبيق إلى الحافظة');
                            })
                            .catch(err => {
                                console.error('فشل في نسخ الرابط: ', err);
                            });
                    }
                });
                
                // سياسة الخصوصية
                document.getElementById('privacy-policy').addEventListener('click', function() {
                    showPrivacyPolicy();
                });
                
                // عن التطبيق
                document.getElementById('about-app').addEventListener('click', function() {
                    showAboutApp();
                });
                
                // الاتصال بالبريد الإلكتروني
                document.getElementById('contact-email').addEventListener('click', function() {
                    window.location.href = 'mailto:kalima.qauran@gmail.com?subject=رسالة من تطبيق كلمة';
                });
                
                // الاتصال بالتليجرام
                document.getElementById('contact-telegram').addEventListener('click', function() {
                    window.open('https://t.me/WazazIbrahim', '_blank');
                });
                
                // إغلاق إشعار آخر آية
                document.getElementById('last-ayah-close').addEventListener('click', function() {
                    hideLastAyahNotification();
                });
                
                // إغلاق إشعار استئناف القراءة
                document.getElementById('resume-close').addEventListener('click', function(e) {
                    e.stopPropagation();
                    hideResumeNotification();
                });
                
                // النقر على إشعار استئناف القراءة
                document.getElementById('resume-notification').addEventListener('click', function() {
                    if (savedAyah) {
                        openSurahPage(savedAyah.surah, savedAyah.ayah);
                        hideResumeNotification();
                    }
                });
            }
            
            function showPrivacyPolicy() {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal">
                        <h3>سياسة الخصوصية</h3>
                        <p style="text-align: right; line-height: 1.8;">
                            نحن في تطبيق كلمة نحترم خصوصيتك ونلتزم بحماية بياناتك الشخصية. 
                            لا نقوم بجمع أو تخزين أي معلومات شخصية عن المستخدمين. 
                            جميع البيانات التي يتم حفظها (مثل آخر آية تمت قراءتها) 
                            يتم تخزينها محلياً على جهازك فقط ولا يتم إرسالها إلى أي خوادم خارجية.
                        </p>
                        <div class="modal-buttons">
                            <button class="modal-btn confirm" id="close-modal">موافق</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                modal.querySelector('#close-modal').addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
            }
            
            function showAboutApp() {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal">
                        <h3>عن التطبيق</h3>
                        <p style="text-align: right; line-height: 1.8;">
                            تطبيق كلمة هو تطبيق شامل للقرآن الكريم يوفر لك:
                            <br><br>
                            • تلاوة القرآن الكريم كاملاً
                            <br>
                            • السيرة النبوية الشريفة
                            <br>
                            • الأذكار اليومية
                            <br>
                            • السبحة الإلكترونية
                            <br><br>
                            تم تطوير التطبيق بهدف تسهيل الوصول إلى القرآن الكريم 
                            وتعزيز العلاقة مع كتاب الله عز وجل.
                        </p>
                        <div class="modal-buttons">
                            <button class="modal-btn confirm" id="close-modal">موافق</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                modal.querySelector('#close-modal').addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
            }
            
            // ========== الكود المعدل لتحميل السور من API ==========
            async function loadSurahAyahs(surahNumber, ayahNumber = null) {
                const ayahsContainer = document.getElementById('ayahs-container');
                ayahsContainer.innerHTML = '<div class="loading">جاري تحميل الآيات...</div>';
                
                try {
                    // المحاولة الأولى: api.alquran.cloud (الأكثر موثوقية)
                    const response = await fetch(`https://api.alquran.cloud/v1/surah/${surahNumber}/ar.alafasy`);
                    const data = await response.json();
                    
                    if (data.code === 200 && data.data && data.data.ayahs) {
                        displayAyahs(data.data.ayahs, surahNumber, ayahNumber);
                    } else {
                        throw new Error('Failed to load from primary API');
                    }
                } catch (error) {
                    console.error('Error loading from primary API:', error);
                    try {
                        // المحاولة الثانية: api.quran.com
                        const response = await fetch(`https://api.quran.com/api/v4/verses/by_chapter/${surahNumber}?language=ar&words=false&page=1&per_page=300`);
                        const data = await response.json();
                        
                        if (data.verses && data.verses.length > 0) {
                            displayAyahs(data.verses, surahNumber, ayahNumber);
                        } else {
                            throw new Error('Failed to load from secondary API');
                        }
                    } catch (secondError) {
                        console.error('Error loading from secondary API:', secondError);
                        displayError();
                    }
                }
            }
            
            function displayAyahs(ayahs, surahNumber, highlightAyah = null) {
                const container = document.getElementById('ayahs-container');
                container.innerHTML = '';
                
                let ayahsContent = '';
                
                ayahs.forEach(ayah => {
                    // معالجة البيانات من مختلف الـ APIs
                    const ayahNumber = ayah.numberInSurah || ayah.verse_number || ayah.verseKey?.split(':')[1];
                    let ayahText = '';
                    
                    if (ayah.text) {
                        // بيانات من api.alquran.cloud
                        ayahText = ayah.text;
                    } else if (ayah.verse_key) {
                        // بيانات من api.quran.com
                        ayahText = ayah.text_uthmani || 'نص الآية غير متوفر';
                    }
                    
                    const isHighlighted = highlightAyah && parseInt(ayahNumber) === parseInt(highlightAyah);
                    
                    ayahsContent += `
                        <span class="ayah">
                            <span class="ayah-text">${ayahText}</span>
                            <span class="ayah-number" data-surah="${surahNumber}" data-ayah="${ayahNumber}" ${isHighlighted ? 'style="background-color: var(--accent-color); transform: scale(1.1);"' : ''}>
                                ${ayahNumber}
                            </span>
                        </span>
                    `;
                });
                
                container.innerHTML = ayahsContent;
                
                // إضافة event listeners للآيات
                container.querySelectorAll('.ayah-number').forEach(ayahElement => {
                    ayahElement.addEventListener('click', function() {
                        const surahNum = this.dataset.surah;
                        const ayahNum = this.dataset.ayah;
                        
                        // حفظ آخر آية تم النقر عليها
                        lastClickedAyah = { 
                            surah: parseInt(surahNum), 
                            ayah: parseInt(ayahNum),
                            timestamp: new Date().getTime()
                        };
                        
                        // حفظ نص الآية الحالي
                        const ayahTextElement = this.previousElementSibling;
                        if (ayahTextElement && ayahTextElement.classList.contains('ayah-text')) {
                            lastAyahText = ayahTextElement.textContent.trim();
                        }
                        
                        saveSettings();
                        
                        // عرض إشعار
                        showLastAyahNotification(surahNum, ayahNum);
                        
                        // عرض نافذة حفظ الآية
                        showSaveAyahModal(surahNum, ayahNum);
                    });
                });
                
                // التمرير إلى الآية المحددة
                if (highlightAyah) {
                    setTimeout(() => {
                        const highlightedAyah = container.querySelector(`.ayah-number[data-ayah="${highlightAyah}"]`);
                        if (highlightedAyah) {
                            highlightedAyah.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'center',
                                inline: 'center'
                            });
                            
                            // تأثير مرئي للآية المحددة
                            highlightedAyah.style.backgroundColor = 'var(--accent-color)';
                            setTimeout(() => {
                                highlightedAyah.style.transition = 'background-color 1s ease';
                                highlightedAyah.style.backgroundColor = '';
                            }, 2000);
                        }
                    }, 300);
                }
            }
            
            function displayError() {
                const container = document.getElementById('ayahs-container');
                const t = appTexts[currentLanguage] || appTexts.ar;
                
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--primary-color);">
                        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h3>${currentLanguage === 'ar' ? 'تعذر تحميل الآيات' : 
                              currentLanguage === 'id' ? 'Gagal Memuat Ayat' : 
                              'خطا در بارگذاری آیات'}</h3>
                        <p>${currentLanguage === 'ar' ? 'يرجى التحقق من اتصال الإنترنت والمحاولة مرة أخرى' : 
                              currentLanguage === 'id' ? 'Periksa koneksi internet dan coba lagi' : 
                              'لطفا اتصال اینترنت را بررسی کرده و مجددا تلاش کنید'}</p>
                    </div>
                `;
            }
            // ========== نهاية الكود المعدل ==========
            
            function showLastAyahNotification(surahNum, ayahNum) {
                const surah = surahs.find(s => s.number == surahNum);
                const t = appTexts[currentLanguage] || appTexts.ar;
                
                const notification = document.getElementById('last-ayah-notification');
                const content = document.getElementById('last-ayah-content');
                
                content.textContent = t.lastAyah.replace('{ayah}', ayahNum).replace('{surah}', surah.name);
                notification.classList.add('show');
                
                // إخفاء الإشعار تلقائياً بعد 4 ثوانٍ
                setTimeout(() => {
                    hideLastAyahNotification();
                }, 4000);
            }
            
            function hideLastAyahNotification() {
                const notification = document.getElementById('last-ayah-notification');
                notification.classList.remove('show');
            }
            
            function showSaveAyahModal(surahNum, ayahNum) {
                const surah = surahs.find(s => s.number == surahNum);
                const t = appTexts[currentLanguage] || appTexts.ar;
                
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal">
                        <h3>${t.saveAyah}</h3>
                        <p>${t.saveConfirm.replace('{ayah}', ayahNum).replace('{surah}', surah.name)}</p>
                        <div class="modal-buttons">
                            <button class="modal-btn confirm">${t.yes}</button>
                            <button class="modal-btn cancel">${t.no}</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                modal.querySelector('.confirm').addEventListener('click', function() {
                    // حفظ الآية المحددة
                    savedAyah = { 
                        surah: parseInt(surahNum), 
                        ayah: parseInt(ayahNum),
                        timestamp: new Date().getTime()
                    };
                    saveSettings();
                    
                    // إظهار رسالة تأكيد
                    showSaveConfirmation();
                    document.body.removeChild(modal);
                });
                
                modal.querySelector('.cancel').addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
                
                // إغلاق النافذة عند النقر خارجها
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        document.body.removeChild(modal);
                    }
                });
            }
            
            function showSaveConfirmation() {
                const t = appTexts[currentLanguage] || appTexts.ar;
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal">
                        <h3>${t.saveAyah}</h3>
                        <p>${currentLanguage === 'ar' ? 'تم حفظ الآية بنجاح!' : 
                              currentLanguage === 'id' ? 'Ayat berhasil disimpan!' : 
                              'آیه با موفقیت ذخیره شد!'}</p>
                        <div class="modal-buttons">
                            <button class="modal-btn confirm">${t.yes}</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                modal.querySelector('.confirm').addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
                
                // إغلاق تلقائي بعد 2 ثانية
                setTimeout(() => {
                    if (document.body.contains(modal)) {
                        document.body.removeChild(modal);
                    }
                }, 2000);
            }
            
            function checkForSavedAyah() {
                if (savedAyah) {
                    const surah = surahs.find(s => s.number == savedAyah.surah);
                    const t = appTexts[currentLanguage] || appTexts.ar;
                    
                    // استخراج الكلمة الأولى والأخيرة من الآية
                    let firstWord = '';
                    let lastWord = '';
                    
                    if (lastAyahText) {
                        const words = lastAyahText.trim().split(/\s+/);
                        if (words.length > 0) {
                            firstWord = words[0];
                            lastWord = words[words.length - 1];
                        }
                    }
                    
                    // عرض الإشعار الصغير بدلاً من النافذة الكبيرة
                    const notification = document.getElementById('resume-notification');
                    const content = document.getElementById('resume-content');
                    
                    content.textContent = `${t.resume.message.replace('{ayah}', savedAyah.ayah).replace('{surah}', surah.name)} ﴿ ${firstWord} ..... ${lastWord} ﴾`;
                    notification.classList.add('show');
                    
                    // إخفاء الإشعار تلقائياً بعد 5 ثوانٍ
                    setTimeout(() => {
                        hideResumeNotification();
                    }, 5000);
                }
            }
            
            function hideResumeNotification() {
                const notification = document.getElementById('resume-notification');
                notification.classList.remove('show');
            }
            
            function incrementTasbih(index) {
                tasbihData[index].current++;
                
                if (tasbihData[index].current >= tasbihData[index].target) {
                    tasbihData[index].current = 0;
                }
                
                const tasbihItem = document.querySelector(`.tasbih-item[data-index="${index}"]`);
                const counterDisplay = tasbihItem.querySelector('.counter-display');
                counterDisplay.textContent = `${tasbihData[index].current}/${tasbihData[index].target}`;
                
                if (tasbihData[index].current === 0) {
                    counterDisplay.style.color = 'var(--secondary-color)';
                    setTimeout(() => {
                        counterDisplay.style.color = 'var(--accent-color)';
                    }, 500);
                }
            }
            
            function resetTasbih(index) {
                tasbihData[index].current = 0;
                
                const tasbihItem = document.querySelector(`.tasbih-item[data-index="${index}"]`);
                const counterDisplay = tasbihItem.querySelector('.counter-display');
                counterDisplay.textContent = `${tasbihData[index].current}/${tasbihData[index].target}`;
                
                counterDisplay.style.color = 'var(--accent-color)';
            }
        });
    </script>
<!-- في النهاية قبل </body> -->
<script src="load-storage.js"></script>
</body>
</html>
